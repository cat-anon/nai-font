var G=Object.defineProperty;var J=(e,t,o)=>t in e?G(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var O=(e,t,o)=>(J(e,typeof t!="symbol"?t+"":t,o),o);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function o(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(r){if(r.ep)return;r.ep=!0;const c=o(r);fetch(r.href,c)}})();function y(){}function D(e){return e()}function N(){return Object.create(null)}function F(e){e.forEach(D)}function I(e){return typeof e=="function"}function K(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function W(e){return Object.keys(e).length===0}function _(e,t){e.appendChild(t)}function X(e,t,o){e.insertBefore(t,o||null)}function P(e){e.parentNode&&e.parentNode.removeChild(e)}function E(e){return document.createElement(e)}function z(e){return document.createTextNode(e)}function T(){return z(" ")}function V(e,t,o,a){return e.addEventListener(t,o,a),()=>e.removeEventListener(t,o,a)}function U(e,t,o){o==null?e.removeAttribute(t):e.getAttribute(t)!==o&&e.setAttribute(t,o)}function Q(e){return Array.from(e.childNodes)}let $;function b(e){$=e}function Y(){if(!$)throw new Error("Function called outside component initialization");return $}function Z(e){Y().$$.on_mount.push(e)}const h=[],B=[];let g=[];const C=[],ee=Promise.resolve();let M=!1;function te(){M||(M=!0,ee.then(H))}function k(e){g.push(e)}const j=new Set;let m=0;function H(){if(m!==0)return;const e=$;do{try{for(;m<h.length;){const t=h[m];m++,b(t),ne(t.$$)}}catch(t){throw h.length=0,m=0,t}for(b(null),h.length=0,m=0;B.length;)B.pop()();for(let t=0;t<g.length;t+=1){const o=g[t];j.has(o)||(j.add(o),o())}g.length=0}while(h.length);for(;C.length;)C.pop()();M=!1,j.clear(),b(e)}function ne(e){if(e.fragment!==null){e.update(),F(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(k)}}function oe(e){const t=[],o=[];g.forEach(a=>e.indexOf(a)===-1?t.push(a):o.push(a)),o.forEach(a=>a()),g=t}const re=new Set;function ie(e,t){e&&e.i&&(re.delete(e),e.i(t))}function ae(e,t,o){const{fragment:a,after_update:r}=e.$$;a&&a.m(t,o),k(()=>{const c=e.$$.on_mount.map(D).filter(I);e.$$.on_destroy?e.$$.on_destroy.push(...c):F(c),e.$$.on_mount=[]}),r.forEach(k)}function se(e,t){const o=e.$$;o.fragment!==null&&(oe(o.after_update),F(o.on_destroy),o.fragment&&o.fragment.d(t),o.on_destroy=o.fragment=null,o.ctx=[])}function le(e,t){e.$$.dirty[0]===-1&&(h.push(e),te(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ce(e,t,o,a,r,c,s=null,f=[-1]){const d=$;b(e);const n=e.$$={fragment:null,ctx:[],props:c,update:y,not_equal:r,bound:N(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(d?d.$$.context:[])),callbacks:N(),dirty:f,skip_bound:!1,root:t.target||d.$$.root};s&&s(n.root);let i=!1;if(n.ctx=o?o(e,t.props||{},(u,l,...p)=>{const x=p.length?p[0]:l;return n.ctx&&r(n.ctx[u],n.ctx[u]=x)&&(!n.skip_bound&&n.bound[u]&&n.bound[u](x),i&&le(e,u)),l}):[],n.update(),i=!0,F(n.before_update),n.fragment=a?a(n.ctx):!1,t.target){if(t.hydrate){const u=Q(t.target);n.fragment&&n.fragment.l(u),u.forEach(P)}else n.fragment&&n.fragment.c();t.intro&&ie(e.$$.fragment),ae(e,t.target,t.anchor),H()}b(d)}class fe{constructor(){O(this,"$$");O(this,"$$set")}$destroy(){se(this,1),this.$destroy=y}$on(t,o){if(!I(o))return y;const a=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return a.push(o),()=>{const r=a.indexOf(o);r!==-1&&a.splice(r,1)}}$set(t){this.$$set&&!W(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ue="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ue);var v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},q={exports:{}};(function(e,t){(function(o,a){a()})(v,function(){function o(n,i){return typeof i>"u"?i={autoBom:!1}:typeof i!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\uFEFF",n],{type:n.type}):n}function a(n,i,u){var l=new XMLHttpRequest;l.open("GET",n),l.responseType="blob",l.onload=function(){d(l.response,i,u)},l.onerror=function(){console.error("could not download file")},l.send()}function r(n){var i=new XMLHttpRequest;i.open("HEAD",n,!1);try{i.send()}catch{}return 200<=i.status&&299>=i.status}function c(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(i)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof v=="object"&&v.global===v?v:void 0,f=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!f?function(n,i,u){var l=s.URL||s.webkitURL,p=document.createElement("a");i=i||n.name||"download",p.download=i,p.rel="noopener",typeof n=="string"?(p.href=n,p.origin===location.origin?c(p):r(p.href)?a(n,i,u):c(p,p.target="_blank")):(p.href=l.createObjectURL(n),setTimeout(function(){l.revokeObjectURL(p.href)},4e4),setTimeout(function(){c(p)},0))}:"msSaveOrOpenBlob"in navigator?function(n,i,u){if(i=i||n.name||"download",typeof n!="string")navigator.msSaveOrOpenBlob(o(n,u),i);else if(r(n))a(n,i,u);else{var l=document.createElement("a");l.href=n,l.target="_blank",setTimeout(function(){c(l)})}}:function(n,i,u,l){if(l=l||open("","_blank"),l&&(l.document.title=l.document.body.innerText="downloading..."),typeof n=="string")return a(n,i,u);var p=n.type==="application/octet-stream",x=/constructor/i.test(s.HTMLElement)||s.safari,S=/CriOS\/[\d]+/.test(navigator.userAgent);if((S||p&&x||f)&&typeof FileReader<"u"){var A=new FileReader;A.onloadend=function(){var w=A.result;w=S?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),l?l.location.href=w:location=w,l=null},A.readAsDataURL(n)}else{var R=s.URL||s.webkitURL,L=R.createObjectURL(n);l?l.location=L:location.href=L,l=null,setTimeout(function(){R.revokeObjectURL(L)},4e4)}});s.saveAs=d.saveAs=d,e.exports=d})})(q);var de=q.exports;function pe(e){let t,o,a,r,c,s,f,d;return{c(){t=E("main"),o=E("h1"),o.textContent="NovelAI font uploader for anon.",a=T(),r=E("p"),r.textContent="Upload a .theme file if your want to add font to an existing theme, or add font right away for default theme.",c=T(),s=E("input"),U(s,"type","file"),U(s,"accept",".naitheme, .ttf, .otf")},m(n,i){X(n,t,i),_(t,o),_(t,a),_(t,r),_(t,c),_(t,s),f||(d=V(s,"change",e[0]),f=!0)},p:y,i:y,o:y,d(n){n&&P(t),f=!1,d()}}}function me(e){let t=null;const o=s=>new Promise((f,d)=>{const n=new FileReader;n.readAsDataURL(s),n.onload=()=>f(n.result),n.onerror=d});async function a(s){if(t=s.target.files[0],t.name.endsWith(".naitheme")){r=await t.text(),console.log(r),c=t.name;return}let f=JSON.parse(r),d=await o(t);f.global+=`@font-face {font-family: 'MyFontFamily';src: url(${d});}`,f.fonts.default="MyFontFamily",f.fonts.code="MyFontFamily",f.fonts.field="MyFontFamily",f.fonts.headings="MyFontFamily",f.fonts.selectedHeadings="MyFontFamily",f.fonts.selectedDefault="MyFontFamily";var n=new Blob([JSON.stringify(f)],{type:"text/plain;charset=utf-8"});de.saveAs(n,c)}let r="",c="NovelAI Dark.naitheme";return Z(async()=>{r=await(await fetch("/NovelAI Dark.naitheme")).text()}),[a]}class he extends fe{constructor(t){super(),ce(this,t,me,pe,K,{})}}new he({target:document.getElementById("app")});
